// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

// - Gamification
//     - World Schema (world data)
//         - Location
//         - Chucks
//             - Tile
//                 - ID for unique tiles
//                 - Resource tile schema
//                 - Building tile schema
//     - Zombie
//         - Location
//         - Stats
//             - Attack
//             - Health
//             - Movement Speed
//     - Game Profile
//         - Player Stats
//         - Settings
// - Productivity
//     - Tasks
//     - Habits
//     - Work Sessions
// - Social
//     - Leaderboard
//     - Social Profile

model User {
  userid String @default(uuid()) @id
  firstName String
  lastName String
  username String @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  // create a one to one relationship between user and world model using userid and worldid as connectors
  world World?
}

model World {
  // default world attributes
  worldid String @default(uuid()) @id
  name String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  // one to one relationship between world and user model using userid and worldid as connectors
  ownedUser User? @relation(fields: [ownedUserid], references: [userid])
  ownedUserid String? @unique

  // one to many relationship between world and chuck model using worldid as connector
  chucks Chuck[]
}

model Chuck {
  // default chuck attributes
  chuckid String @default(uuid()) @id
  name String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  // Chuck specific attributes
  chuckX Int
  chuckY Int
  // one to many relationship between chuck and tile model using chuckid as connector
  tiles Tile[]
  // one to many relationship between chuck and world model using worldid as connector
  world World @relation(fields: [worldid], references: [worldid])
  worldid String
}

model Tile {
  // default tile attributes
  tileid String @default(uuid()) @id
  name String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  // one to many relationship between tile and chuck model using chuckid as connector
  chuck Chuck @relation(fields: [chuckid], references: [chuckid])
  chuckid String
  // // one to many relationship between tile and resourceTile model using tileid as connector
  // resourceTile ResourceTile[]
  // // one to many relationship between tile and buildingTile model using tileid as connector
  // buildingTile BuildingTile[]
}

enum ResourceType {
  WOOD
  STONE
  FOOD
  WATER
}

enum BuildingType {
  HOUSE
  FARM
  MINE
  LUMBERYARD
}
